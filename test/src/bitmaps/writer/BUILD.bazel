load("@rules_cc//cc:defs.bzl", "cc_test")

cc_library(
    name = "fixtures",
    hdrs = glob(["*.h"]),
    srcs = glob(["*.cpp"]),
    deps = [
        "@com_google_googletest//:gtest_main",
        "//test/src/bitmaps/fixtures:test_fixtures",
        "//src/files:files",
        "//src/bitmaps/formats:bitmap_formats",
        "//src/bitmaps/packet:bitmap_packet",
        "//src/bitmaps/reader:bitmap_reader",
        "//src/bitmaps/writer:bitmap_writer",
    ],
    visibility = ["//visibility:public"],
)

cc_test(
    name = "tests",
    size = "small",
    srcs = glob(["*.cpp"]),
    deps = [
        "@com_google_googletest//:gtest_main",
        "//test/src/bitmaps/writer:fixtures"
    ]
)
